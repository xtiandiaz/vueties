@use '@design-tokens/palette';
@use '@design-tokens/typography';
@use '@design-tokens/mixins';
@use '@/assets/varties';

$form-padding: 1rem;
$max-width: 1080px !default;
$row-h-padding: 1rem;
$row-min-height: 3rem;

form {
  display: flex;
  flex-direction: column;
  gap: 2em;
  margin: 0 auto;
  max-width: $max-width;
  padding: $form-padding;
  text-align: left;
  
  ::placeholder {
    @include palette.color-attribute('color', varties.$accessory-color);
  }
  
  input:focus, textarea:focus {
    outline: none;
  }
  
  input[type=text] {
    line-height: $row-min-height;
    @include palette.color-attributes((
      'background-color': varties.$background-color,
      'color': varties.$body-color,
      'caret-color': varties.$body-color
    ));
  }

  section {
    display: flex;
    flex-direction: column;
    gap: 0.5em;
    
    > * {
      width: auto;
    }
    
    div.header, div.footer {
      padding: 0 1em;
      @include typography.caption();
      @include palette.color-attribute('color', varties.$tertiary-body-color);
      
      > * {
        display: block;
      }
    }
    
    div.header {
      display: flex;
      flex-direction: column;
      gap: 0.25em;
      
      &.inline {
        align-items: center;
        flex-direction: row;
        gap: 0.5em;
      }
      
      span.title {
        letter-spacing: 0.05em;
        @include typography.strong();
      }
    }
    
    .rows {
      border-radius: varties.$form-section-border-radius;
      display: flex;
      flex-direction: column;
      gap: 1px;
      overflow: hidden;
      @include palette.color-attributes((
        'background-color': varties.$tertiary-background-color
      ));
      
      .divider {
        line-height: calc($row-min-height / 1.25);
        min-height: 0.5em;
        padding-left: 1em;
        @include palette.color-attribute('background-color', varties.$background-color, 0.75);
        @include palette.color-attributes((
          'color': varties.$secondary-body-color
        ));
      }
    }
  }
  
  .row {
    align-items: center;
    display: flex;
    flex-direction: row;
    gap: 0.75em;
    min-height: $row-min-height;
    overflow: hidden;
    padding: 0 $row-h-padding;
    @include palette.color-attribute('background-color', varties.$background-color);
    
    &:first-of-type .rounded-element {
      border-radius: 1em 1em 0 0;
    }
    &:last-of-type .rounded-element {
      border-radius: 0 0 1em 1em;
    }
    &:only-of-type .rounded-element {
      border-radius: 1em;
    }
    
    &.text-input {
      padding: 0;
      gap: 0;
      
      input {
        border: none;
        padding: 0;
        width: 100%;
        @include typography.body();
      }
    }
    
    &.discloser {
      padding-right: calc($row-h-padding / 1.5);
    }
    
    .disclosure-indicator {
      @include mixins.size(1rem);
      @include palette.color-attribute('color', varties.$accessory-color);
    }
    
    .disclosure-wrapper {
      align-items: center;
      display: inline-flex;
      gap: 0.5em;
      
      > * {
        display: inline-block;
      }
    }
    
    .representative-icon {
      @include mixins.size(1.5em);
    }
    
    .spacer {
      flex: auto;
    }
  }
}
